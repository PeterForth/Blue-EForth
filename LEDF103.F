\  F103 BLUE PILL BLINK PC13
\  REFER TO STM PDF RM0008 FOR GPIO SETUPS
HEX
: BIT ( PIN# - BIT ) \ USED AS A GENERAL PORT MASK VALUE
   1 SWAP LSHIFT ;

: CONF ( Conf/mode PIN# - MASK OFFSET ) \ USED FOR MODE AND CONFIG
   4 * 20 /MOD
   4 *
   0F ROT LSHIFT
   SWAP ;

\ MODE MASKS
CCCCCCCC CONSTANT INMODE
33333333 CONSTANT OUT50
11111111 CONSTANT OUT10
22222222 CONSTANT OUT2

\ CONFIG MASKS
  \ INS
: ANALOG 0 AND ;
: FLOAT 44444444 AND ;
: UP/DN 88888888 AND ;
  \ OUTS TYPE MODIFIERS
: ALT 88888888 OR ;
: P/P ;
: DRAIN 44444444 OR ;


\ GPIO DATA PORT OFFSETs
08 CONSTANT INPUT
10 CONSTANT S/R
0C CONSTANT OUTPUT

\ EXAMPLE TO PLAY WITH GREEN LED
DECIMAL
 13 CONSTANT LED#
 LED# BIT CONSTANT LED  \ PORT MASK
 DRAIN OUT2 LED# CONF PC+ MSK!
HEX

: OFF LED 0 PC+ SET! ;
: ON LED 0 PC+ CLR! ;

